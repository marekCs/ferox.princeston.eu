!function(b,I,S,k){"use strict";I.extend({xZoom:function(u,h){var o,t,s=u.root,m=u.options.zoom||{},l=m.max||1.5,r=m.min||.8,e=m.on||!1,d=m.scale||!1,f=m.click||!1,i=m.root||!1,n=m.rootClass||"is-zoomed",p=m.target||".slide__media",y=m.dragClass||"is-dragging",c="is-zoomable",a=1,g={x:0,y:0},w=null,x=null,v=null,Z=0,z={},C=null,E=b.windowSize()||{};return{currSlide:null,unZoomed:!1,mount:function(){var s=this;e&&(u.on("mounted.spz",function(){setTimeout(function(){s.wheelZoom()},500)}),u.on("active.spz",function(t){s.currSlide=t,s.unZoomed=!1,s.prepare()}),u.on("inactive.spz",function(t){s.currSlide=null,s.toogleClass(!1);t=b.find(t.slide,"."+c);b.isElm(t)&&s.scale(!1,t)}),s.dragon())},wheelZoom:function(){var e=this;(t=b.findAll(s,p)).length&&b.each(t,function(t){var s=b.find(t,"."+c);b.isElm(s)&&(e.scale(!1,s),e.bindWheel(t,!0,e.zoom.bind(e)))})},bindWheel:function(t,s,e){b[s?"on":"off"](t,"wheel",e,{passive:!0})},fit:function(t){var s=t.target||t,e=b.closest(s,".slide"),i=(o=e,"width"==="height"?o.offsetWidth:o.offsetHeight),n=i,a=0,t=s.naturalWidth,e=s.naturalHeight,o=b.attr(s,"width",e);s.style.width="auto",n=n<t&&e<t?(l=n)/(a=t/e):(l=i<e&&t<e?i/(a=e/t):n,i);var l,i=o<i;s.dataset&&(s.dataset.sFit=i?1:0,s.dataset.sNw=parseInt(t,0),s.dataset.sNh=parseInt(e,0),s.dataset.sCw=parseInt(l,0),s.dataset.sCh=parseInt(n,0),s.dataset.sRatio=parseInt(a,0),e=i,(l=s)&&l.dataset&&(n=l.dataset.sNw,a=l.dataset.sNh,i=l.dataset.sCw,s=l.dataset.sCh,a=b.attr(l,"height",a),n=b.attr(l,"width",n),l.style.width=(e?n:i)+"px",l=b.closest(l,"picture"),b.isElm(l)&&(l.style.width=(e?n:i)+"px",l.style.height=(e?a:s)+"px")))},prepare:function(){var s=this,t=b.findAll(k,"."+c);t.length&&b.each(t,function(t){b.isDecoded(t)?s.fit(t):b.one(t,"load",s.fit.bind(s))}),s.currSlide&&(x=b.find(s.currSlide.slide,p),b.isElm(x)&&(v=b.find(x,"."+c)))},zoomRoot:function(){return!b.isElm(w)&&i&&(w="string"==typeof i?b.find(k,i):i),b.isElm(w)?w:s},zoom:function(t){var s=this,e=I.wheelDelta(t);s.prepare(),a+=-.01*e,a=Math.min(Math.max(1,a),l),s.isZoomed()?(s.unZoomed=!1,s.scrollon(t)):s.unZoomed?(a=1,s.scale(!1,v)):s.scale(!s.isZoomed(),v)},scale:function(t,s){0;var e=t,i=!1,n=s&&s.dataset,a=parseInt(s.dataset.sNh,0);a<E.height||(n&&(i=1===parseInt(s.dataset.sFit,0)),this.toogleClass(e),n&&d&&!i&&(i=b.closest(s,".slide"),b.addClass(i,c+"-slide"),l=4<(l=Math.min(parseInt(s.dataset.sNw,0)/parseInt(s.dataset.sCw,0),a/parseInt(s.dataset.sCh,0)))?3:l,o=t?l:r,s.style.transform="scale("+o+")"),b.isElm(x)&&(e&&this.isZoomed()&&b.isElm(s)||(x.style.transform="translate(0px)")))},scrollon:function(t){var s=this;C&&S.cancelAnimationFrame(C),s.sizes(),!b.isEmpty(z)&&s.isValid()&&(C=S.requestAnimationFrame(function(){s._scrollon(t)}))},_scrollon:function(t){t.preventDefault(),t.stopPropagation();var s=b.isElm(x)&&b.find(x,"."+c),e=b.isElm(s)&&s.dataset&&1===parseInt(s.dataset.sFit,0),i=Math.abs(z.h-z.ph)/1.5,s=I.wheelDelta(t),t=.5*i;return g.y+=0<s?-t:t,g.x=0,Z=Math.abs(g.y)>=i,0<s&&Z?g.y=-i:s<0&&Z&&(g.y=i),b.isElm(x)&&!e&&(x.style.transform="translate("+g.x+"px,"+g.y+"px)"),C=null,!1},dragon:function(){var e,i,n=this,t=n.zoomRoot(),a=!1,s=m,o=x,l=0;s.onClick=!!f&&n.clicked.bind(n),s.callback=function(t,s){o=s.el||o,g.x=s.x||0,g.y=s.y||0,n.sizes(),l=Math.ceil((z.h-z.ph)/2),i=s.dir,e=s.phase,o&&("start"===e?c("off"):"move"===e?n.isZoomed()?o.style.transform="translate("+g.x+"px,"+g.y+"px)":d():"end"===e&&function(){Z=Math.abs(g.y)>=l;var t="right"===i,s="left"===i,e=t||s;e?(a=!0,g.x=t?0:-1):Z&&(a=!0,g.y="down"===i&&0<g.y?l:-l),setTimeout(function(){c("on"),n.isZoomed()?a&&(o.style.transform="translate("+g.x+"px,"+g.y+"px)"):e&&d()},e?1200:12e3)}())},s.dragClass=y;var r=[];function d(){o.style.transform="translate(0px)"}function c(t){n[t](),u.options={drag:!n.isZoomed()}}b.each(h.Elements.slides,function(t){t=b.find(t,p);b.isElm(t)&&r.push(t)}),s.elms=r,new SwipeDetect(t,s)},clicked:function(t){if(b.hasClass(t.target,c)){if("dblclick"===t.type)return!0;this.unZoomed=!1,a=l,this.scale(!this.isZoomed(),t.target)}else this.unZoomed=!0},sizes:function(t){return v=t||v,z=I.checkSizes(v,x)},isValid:function(){return this.prepare(),b.isElm(x)},isZoomed:function(){return e&&b.hasClass(this.zoomRoot(),n)},toogleClass:function(t){b[t?"addClass":"removeClass"](this.zoomRoot(),n)},on:function(){this.unZoomed=!1},off:function(){this.unZoomed=!0}}}})}(dBlazy,dSplide,this,this.document);
